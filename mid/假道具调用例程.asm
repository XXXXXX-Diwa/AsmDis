08010944 B5F0     push    r4-r7,r14                               
08010946 4657     mov     r7,r10                                  
08010948 464E     mov     r6,r9                                   
0801094A 4645     mov     r5,r8                                   
0801094C B4E0     push    r5-r7                                   
0801094E B081     add     sp,-4h                                  
08010950 9C09     ldr     r4,[sp,24h]                             
08010952 0400     lsl     r0,r0,10h                                
08010954 0C00     lsr     r0,r0,10h                               
08010956 4682     mov     r10,r0      ;人物Y坐标                            
08010958 0409     lsl     r1,r1,10h                               
0801095A 0C0D     lsr     r5,r1,10h                               
0801095C 1C2F     mov     r7,r5       ;人物X坐标                            
0801095E 0612     lsl     r2,r2,18h                               
08010960 0E12     lsr     r2,r2,18h                               
08010962 9200     str     r2,[sp]     ;10写入sp                            
08010964 061B     lsl     r3,r3,18h                               
08010966 0E1B     lsr     r3,r3,18h                               
08010968 4698     mov     r8,r3       ;18h                            
0801096A 0624     lsl     r4,r4,18h                               
0801096C 0E24     lsr     r4,r4,18h                               
0801096E 2000     mov     r0,0h                                   
08010970 4681     mov     r9,r0       ;0写入r9                            
08010972 4911     ldr     r1,=3000738h                            
08010974 468C     mov     r12,r1                                  
08010976 8809     ldrh    r1,[r1]                                 
08010978 2080     mov     r0,80h                                  
0801097A 0080     lsl     r0,r0,2h   ;取向and 200                            
0801097C 4008     and     r0,r1                                   
0801097E 0400     lsl     r0,r0,10h                               
08010980 0C06     lsr     r6,r0,10h                               
08010982 2E00     cmp     r6,0h                                   
08010984 D027     beq     @@No200                               
08010986 4662     mov     r2,r12                                  
08010988 322D     add     r2,2Dh                                  
0801098A 7810     ldrb    r0,[r2]    ;读取765的值                             
0801098C 2800     cmp     r0,0h                                   
0801098E D115     bne     @@765No0
;--------------------------取向有200同时765为0                                
08010990 4666     mov     r6,r12                                  
08010992 88B1     ldrh    r1,[r6,4h] ;读取X坐标                             
08010994 1F28     sub     r0,r5,4    ;人物X坐标向左4                             
08010996 4281     cmp     r1,r0      ;X坐标和人物坐标比较                             
08010998 DC28     bgt     @@EneryAtRight 

;--------------------------敌人在左边                               
0801099A 4661     mov     r1,r12                                  
0801099C 312E     add     r1,2Eh                                  
0801099E 7808     ldrb    r0,[r1]    ;766的值                             
080109A0 4298     cmp     r0,r3      ;和18h比较                             
080109A2 D201     bcs     @@PassAdd766                               
080109A4 3001     add     r0,1h      ;小于的话                             
080109A6 7008     strb    r0,[r1]    ;766的值加1

@@PassAdd766:                                
080109A8 7808     ldrb    r0,[r1]                                 
080109AA 4120     asr     r0,r4                                   
080109AC 4661     mov     r1,r12                                  
080109AE 8889     ldrh    r1,[r1,4h]                              
080109B0 1840     add     r0,r0,r1                                
080109B2 4662     mov     r2,r12                                  
080109B4 8090     strh    r0,[r2,4h]                              
080109B6 E04D     b       8010A54h                                
080109B8 0738     lsl     r0,r7,1Ch                               
080109BA 0300     lsl     r0,r0,0Ch  

@@765No0:                             
080109BC 3801     sub     r0,1h                                   
080109BE 7010     strb    r0,[r2]                                 
080109C0 0600     lsl     r0,r0,18h                               
080109C2 2800     cmp     r0,0h                                   
080109C4 D049     beq     8010A5Ah                                
080109C6 7810     ldrb    r0,[r2]                                 
080109C8 4120     asr     r0,r4                                   
080109CA 4663     mov     r3,r12                                  
080109CC 889B     ldrh    r3,[r3,4h]                              
080109CE 18C0     add     r0,r0,r3                                
080109D0 4666     mov     r6,r12                                  
080109D2 80B0     strh    r0,[r6,4h]                              
080109D4 E03E     b       8010A54h  

@@No200:                              
080109D6 4662     mov     r2,r12                                  
080109D8 322D     add     r2,2Dh                                  
080109DA 7810     ldrb    r0,[r2]                                 
080109DC 1C05     mov     r5,r0                                   
080109DE 2D00     cmp     r5,0h                                   
080109E0 D11E     bne     8010A20h                                
080109E2 4660     mov     r0,r12                                  
080109E4 8883     ldrh    r3,[r0,4h]                              
080109E6 1D38     add     r0,r7,4                                 
080109E8 4283     cmp     r3,r0                                   
080109EA DA04     bge     80109F6h 

@@EneryAtRight:                               
080109EC 4660     mov     r0,r12                                  
080109EE 302E     add     r0,2Eh                                  
080109F0 7800     ldrb    r0,[r0]                                 
080109F2 7010     strb    r0,[r2]                                 
080109F4 E02E     b       8010A54h                                
080109F6 4661     mov     r1,r12                                  
080109F8 312E     add     r1,2Eh                                  
080109FA 7808     ldrb    r0,[r1]                                 
080109FC 4540     cmp     r0,r8                                   
080109FE D201     bcs     8010A04h                                
08010A00 3001     add     r0,1h                                   
08010A02 7008     strb    r0,[r1]                                 
08010A04 7808     ldrb    r0,[r1]                                 
08010A06 4120     asr     r0,r4                                   
08010A08 0400     lsl     r0,r0,10h                               
08010A0A 0C01     lsr     r1,r0,10h                               
08010A0C 1A59     sub     r1,r3,r1                                
08010A0E 2080     mov     r0,80h                                  
08010A10 0200     lsl     r0,r0,8h                                
08010A12 4008     and     r0,r1                                   
08010A14 2800     cmp     r0,0h                                   
08010A16 D018     beq     8010A4Ah                                
08010A18 2101     mov     r1,1h                                   
08010A1A 4689     mov     r9,r1                                   
08010A1C 7015     strb    r5,[r2]                                 
08010A1E E019     b       8010A54h                                
08010A20 3801     sub     r0,1h                                   
08010A22 7010     strb    r0,[r2]                                 
08010A24 0600     lsl     r0,r0,18h                               
08010A26 2800     cmp     r0,0h                                   
08010A28 D012     beq     8010A50h                                
08010A2A 7810     ldrb    r0,[r2]                                 
08010A2C 4120     asr     r0,r4                                   
08010A2E 0400     lsl     r0,r0,10h                               
08010A30 0C01     lsr     r1,r0,10h                               
08010A32 4663     mov     r3,r12                                  
08010A34 8898     ldrh    r0,[r3,4h]                              
08010A36 1A41     sub     r1,r0,r1                                
08010A38 2080     mov     r0,80h                                  
08010A3A 0200     lsl     r0,r0,8h                                
08010A3C 4008     and     r0,r1                                   
08010A3E 2800     cmp     r0,0h                                   
08010A40 D003     beq     8010A4Ah                                
08010A42 2001     mov     r0,1h                                   
08010A44 4681     mov     r9,r0                                   
08010A46 7016     strb    r6,[r2]                                 
08010A48 E004     b       8010A54h                                
08010A4A 4662     mov     r2,r12                                  
08010A4C 8091     strh    r1,[r2,4h]                              
08010A4E E001     b       8010A54h                                
08010A50 2301     mov     r3,1h                                   
08010A52 4699     mov     r9,r3                                   
08010A54 464E     mov     r6,r9                                   
08010A56 2E00     cmp     r6,0h                                   
08010A58 D00B     beq     8010A72h                                
08010A5A 4661     mov     r1,r12                                  
08010A5C 8808     ldrh    r0,[r1]                                 
08010A5E 2280     mov     r2,80h                                  
08010A60 0092     lsl     r2,r2,2h                                
08010A62 1C11     mov     r1,r2                                   
08010A64 4048     eor     r0,r1                                   
08010A66 4663     mov     r3,r12                                  
08010A68 8018     strh    r0,[r3]                                 
08010A6A 4661     mov     r1,r12                                  
08010A6C 312E     add     r1,2Eh                                  
08010A6E 2001     mov     r0,1h                                   
08010A70 7008     strb    r0,[r1]                                 
08010A72 2600     mov     r6,0h                                   
08010A74 46B1     mov     r9,r6                                   
08010A76 4660     mov     r0,r12                                  
08010A78 8801     ldrh    r1,[r0]                                 
08010A7A 2080     mov     r0,80h                                  
08010A7C 00C0     lsl     r0,r0,3h                                
08010A7E 4008     and     r0,r1                                   
08010A80 0400     lsl     r0,r0,10h                               
08010A82 0C03     lsr     r3,r0,10h                               
08010A84 2B00     cmp     r3,0h                                   
08010A86 D02C     beq     8010AE2h                                
08010A88 4663     mov     r3,r12                                  
08010A8A 332C     add     r3,2Ch                                  
08010A8C 7818     ldrb    r0,[r3]                                 
08010A8E 2800     cmp     r0,0h                                   
08010A90 D11A     bne     8010AC8h                                
08010A92 4662     mov     r2,r12                                  
08010A94 8851     ldrh    r1,[r2,2h]                              
08010A96 4650     mov     r0,r10                                  
08010A98 3804     sub     r0,4h                                   
08010A9A 4281     cmp     r1,r0                                   
08010A9C DD04     ble     8010AA8h                                
08010A9E 4660     mov     r0,r12                                  
08010AA0 302F     add     r0,2Fh                                  
08010AA2 7800     ldrb    r0,[r0]                                 
08010AA4 7018     strb    r0,[r3]                                 
08010AA6 E060     b       8010B6Ah                                
08010AA8 4661     mov     r1,r12                                  
08010AAA 312F     add     r1,2Fh                                  
08010AAC 7808     ldrb    r0,[r1]                                 
08010AAE 9B00     ldr     r3,[sp]                                 
08010AB0 4298     cmp     r0,r3                                   
08010AB2 D201     bcs     8010AB8h                                
08010AB4 3001     add     r0,1h                                   
08010AB6 7008     strb    r0,[r1]                                 
08010AB8 7808     ldrb    r0,[r1]                                 
08010ABA 4120     asr     r0,r4                                   
08010ABC 4664     mov     r4,r12                                  
08010ABE 8864     ldrh    r4,[r4,2h]                              
08010AC0 1900     add     r0,r0,r4                                
08010AC2 4666     mov     r6,r12                                  
08010AC4 8070     strh    r0,[r6,2h]                              
08010AC6 E050     b       8010B6Ah                                
08010AC8 3801     sub     r0,1h                                   
08010ACA 7018     strb    r0,[r3]                                 
08010ACC 0600     lsl     r0,r0,18h                               
08010ACE 2800     cmp     r0,0h                                   
08010AD0 D04E     beq     8010B70h                                
08010AD2 7818     ldrb    r0,[r3]                                 
08010AD4 4120     asr     r0,r4                                   
08010AD6 4661     mov     r1,r12                                  
08010AD8 8849     ldrh    r1,[r1,2h]                              
08010ADA 1840     add     r0,r0,r1                                
08010ADC 4662     mov     r2,r12                                  
08010ADE 8050     strh    r0,[r2,2h]                              
08010AE0 E043     b       8010B6Ah                                
08010AE2 4662     mov     r2,r12                                  
08010AE4 322C     add     r2,2Ch                                  
08010AE6 7810     ldrb    r0,[r2]                                 
08010AE8 1C05     mov     r5,r0                                   
08010AEA 2D00     cmp     r5,0h                                   
08010AEC D123     bne     8010B36h                                
08010AEE 4666     mov     r6,r12                                  
08010AF0 8873     ldrh    r3,[r6,2h]                              
08010AF2 4650     mov     r0,r10                                  
08010AF4 3004     add     r0,4h                                   
08010AF6 4283     cmp     r3,r0                                   
08010AF8 DA04     bge     8010B04h                                
08010AFA 4660     mov     r0,r12                                  
08010AFC 302F     add     r0,2Fh                                  
08010AFE 7800     ldrb    r0,[r0]                                 
08010B00 7010     strb    r0,[r2]                                 
08010B02 E032     b       8010B6Ah                                
08010B04 4661     mov     r1,r12                                  
08010B06 312F     add     r1,2Fh                                  
08010B08 7808     ldrb    r0,[r1]                                 
08010B0A 9E00     ldr     r6,[sp]                                 
08010B0C 42B0     cmp     r0,r6                                   
08010B0E D201     bcs     8010B14h                                
08010B10 3001     add     r0,1h                                   
08010B12 7008     strb    r0,[r1]                                 
08010B14 7808     ldrb    r0,[r1]                                 
08010B16 4120     asr     r0,r4                                   
08010B18 0400     lsl     r0,r0,10h                               
08010B1A 0C01     lsr     r1,r0,10h                               
08010B1C 1A59     sub     r1,r3,r1                                
08010B1E 2080     mov     r0,80h                                  
08010B20 0200     lsl     r0,r0,8h                                
08010B22 4008     and     r0,r1                                   
08010B24 2800     cmp     r0,0h                                   
08010B26 D003     beq     8010B30h                                
08010B28 2001     mov     r0,1h                                   
08010B2A 4681     mov     r9,r0                                   
08010B2C 7015     strb    r5,[r2]                                 
08010B2E E01C     b       8010B6Ah                                
08010B30 4662     mov     r2,r12                                  
08010B32 8051     strh    r1,[r2,2h]                              
08010B34 E019     b       8010B6Ah                                
08010B36 3801     sub     r0,1h                                   
08010B38 7010     strb    r0,[r2]                                 
08010B3A 0600     lsl     r0,r0,18h                               
08010B3C 2800     cmp     r0,0h                                   
08010B3E D012     beq     8010B66h                                
08010B40 7810     ldrb    r0,[r2]                                 
08010B42 4120     asr     r0,r4                                   
08010B44 0400     lsl     r0,r0,10h                               
08010B46 0C01     lsr     r1,r0,10h                               
08010B48 4664     mov     r4,r12                                  
08010B4A 8860     ldrh    r0,[r4,2h]                              
08010B4C 1A41     sub     r1,r0,r1                                
08010B4E 2080     mov     r0,80h                                  
08010B50 0200     lsl     r0,r0,8h                                
08010B52 4008     and     r0,r1                                   
08010B54 2800     cmp     r0,0h                                   
08010B56 D003     beq     8010B60h                                
08010B58 2601     mov     r6,1h                                   
08010B5A 46B1     mov     r9,r6                                   
08010B5C 7013     strb    r3,[r2]                                 
08010B5E E004     b       8010B6Ah                                
08010B60 4660     mov     r0,r12                                  
08010B62 8041     strh    r1,[r0,2h]                              
08010B64 E001     b       8010B6Ah                                
08010B66 2101     mov     r1,1h                                   
08010B68 4689     mov     r9,r1                                   
08010B6A 464A     mov     r2,r9                                   
08010B6C 2A00     cmp     r2,0h                                   
08010B6E D00A     beq     8010B86h                                
08010B70 4663     mov     r3,r12                                  
08010B72 8818     ldrh    r0,[r3]                                 
08010B74 2480     mov     r4,80h                                  
08010B76 00E4     lsl     r4,r4,3h                                
08010B78 1C21     mov     r1,r4                                   
08010B7A 4048     eor     r0,r1                                   
08010B7C 8018     strh    r0,[r3]                                 
08010B7E 4661     mov     r1,r12                                  
08010B80 312F     add     r1,2Fh                                  
08010B82 2001     mov     r0,1h                                   
08010B84 7008     strb    r0,[r1]                                 
08010B86 B001     add     sp,4h                                   
08010B88 BC38     pop     r3-r5                                   
08010B8A 4698     mov     r8,r3                                   
08010B8C 46A1     mov     r9,r4                                   
08010B8E 46AA     mov     r10,r5                                  
08010B90 BCF0     pop     r4-r7                                   
08010B92 BC01     pop     r0                                      

