080503A0 B570     push    r4-r6,lr
080503A2 1C03     mov     r3,r0         ;精灵数据坐标
080503A4 0409     lsl     r1,r1,10h 
080503A6 0C09     lsr     r1,r1,10h     ;伤害值
080503A8 2600     mov     r6,0h
080503AA 8A98     ldrh    r0,[r3,14h]   ;读取精灵的血量
080503AC 4288     cmp     r0,r1
080503AE D905     bls     @@Death    
080503B0 1A40     sub     r0,r0,r1      ;当前血量减去伤害再写入
080503B2 8298     strh    r0,[r3,14h]
080503B4 26F0     mov     r6,0F0h
080503B6 1C1C     mov     r4,r3
080503B8 3432     add     r4,32h
080503BA E021     b       8050400h

@@Death:
080503BC 2500     mov     r5,0h
080503BE 829E     strh    r6,[r3,14h]   ;血量写入0
080503C0 1C1A     mov     r2,r3
080503C2 3232     add     r2,32h
080503C4 7811     ldrb    r1,[r2]       ;读取碰撞属性
080503C6 2010     mov     r0,10h
080503C8 4308     orr     r0,r1
080503CA 7010     strb    r0,[r2]       ;orr 10再写入
080503CC 1C18     mov     r0,r3
080503CE 3030     add     r0,30h        
080503D0 7005     strb    r5,[r0]       ;冰冻时间写入0
080503D2 3810     sub     r0,10h
080503D4 7005     strb    r5,[r0]       ;调色板写入0
080503D6 1C19     mov     r1,r3
080503D8 3131     add     r1,31h
080503DA 7808     ldrb    r0,[r1]       
080503DC 1C14     mov     r4,r2
080503DE 2800     cmp     r0,0h         ;检查是否踩敌或落
080503E0 D006     beq     @@Pass
080503E2 4A0F     ldr     r2,=30013D4h
080503E4 7850     ldrb    r0,[r2,1h]
080503E6 2801     cmp     r0,1h
080503E8 D102     bne     @@Pass
080503EA 2002     mov     r0,2h
080503EC 7050     strb    r0,[r2,1h]    ;samus空中flag
080503EE 700D     strb    r5,[r1]

@@Pass:
080503F0 1C18     mov     r0,r3
080503F2 3024     add     r0,24h
080503F4 2162     mov     r1,62h
080503F6 7001     strb    r1,[r0]       ;写入死亡pose
080503F8 1C19     mov     r1,r3
080503FA 3126     add     r1,26h        ;待机时间写入1
080503FC 2001     mov     r0,1h
080503FE 7008     strb    r0,[r1]


08050400 1C1A     mov     r2,r3
08050402 322B     add     r2,2Bh
08050404 7811     ldrb    r1,[r2]     ;读取击晕时间
08050406 2080     mov     r0,80h
08050408 4008     and     r0,r1
0805040A 2111     mov     r1,11h      ;去掉80
0805040C 4308     orr     r0,r1
0805040E 7010     strb    r0,[r2]     ;重新写入11
08050410 7821     ldrb    r1,[r4]     ;读取碰撞属性
08050412 2002     mov     r0,2h       ;orr2再写入
08050414 4308     orr     r0,r1
08050416 7020     strb    r0,[r4]
08050418 1C30     mov     r0,r6
0805041A BC70     pop     r4-r6
0805041C BC02     pop     r1
0805041E 4708     bx      r1
08050420 13D4     asr     r4,r2,0Fh
08050422 0300     lsl     r0,r0,0Ch
08050424 B570     push    r4-r6,lr
08050426 1C03     mov     r3,r0
08050428 0409     lsl     r1,r1,10h
0805042A 0C09     lsr     r1,r1,10h
0805042C 2600     mov     r6,0h
0805042E 8A98     ldrh    r0,[r3,14h]
08050430 4288     cmp     r0,r1
08050432 D904     bls     805043Eh
08050434 1A40     sub     r0,r0,r1
08050436 8298     strh    r0,[r3,14h]
08050438 1C1C     mov     r4,r3
0805043A 3432     add     r4,32h
0805043C E023     b       8050486h
0805043E 2500     mov     r5,0h
08050440 829E     strh    r6,[r3,14h]
08050442 1C1A     mov     r2,r3
08050444 3232     add     r2,32h
08050446 7811     ldrb    r1,[r2]
08050448 2010     mov     r0,10h
0805044A 4308     orr     r0,r1
0805044C 7010     strb    r0,[r2]
0805044E 1C18     mov     r0,r3
08050450 3030     add     r0,30h
08050452 7005     strb    r5,[r0]
08050454 3810     sub     r0,10h
08050456 7005     strb    r5,[r0]
08050458 1C19     mov     r1,r3
0805045A 3131     add     r1,31h
0805045C 7808     ldrb    r0,[r1]
0805045E 1C14     mov     r4,r2
08050460 2800     cmp     r0,0h
08050462 D006     beq     8050472h
08050464 4A10     ldr     r2,=30013D4h
08050466 7850     ldrb    r0,[r2,1h]
08050468 2801     cmp     r0,1h
0805046A D102     bne     8050472h
0805046C 2002     mov     r0,2h
0805046E 7050     strb    r0,[r2,1h]
08050470 700D     strb    r5,[r1]
08050472 1C19     mov     r1,r3
08050474 3124     add     r1,24h
08050476 2062     mov     r0,62h
08050478 7008     strb    r0,[r1]
0805047A 3102     add     r1,2h
0805047C 2001     mov     r0,1h
0805047E 7008     strb    r0,[r1]
08050480 1C70     add     r0,r6,1
08050482 0600     lsl     r0,r0,18h
08050484 0E06     lsr     r6,r0,18h
08050486 1C1A     mov     r2,r3
08050488 322B     add     r2,2Bh
0805048A 7811     ldrb    r1,[r2]
0805048C 2080     mov     r0,80h
0805048E 4008     and     r0,r1
08050490 2111     mov     r1,11h
08050492 4308     orr     r0,r1
08050494 7010     strb    r0,[r2]
08050496 7821     ldrb    r1,[r4]
08050498 2002     mov     r0,2h
0805049A 4308     orr     r0,r1
0805049C 7020     strb    r0,[r4]
0805049E 1C30     mov     r0,r6
080504A0 BC70     pop     r4-r6
080504A2 BC02     pop     r1
080504A4 4708     bx      r1
080504A6 0000     lsl     r0,r0,0h
080504A8 13D4     asr     r4,r2,0Fh
080504AA 0300     lsl     r0,r0,0Ch
080504AC B500     push    lr
080504AE 1C01     mov     r1,r0
080504B0 1C0B     mov     r3,r1
080504B2 332B     add     r3,2Bh
080504B4 781A     ldrb    r2,[r3]
080504B6 217F     mov     r1,7Fh
080504B8 4011     and     r1,r2
080504BA 2902     cmp     r1,2h
080504BC D204     bcs     80504C8h
080504BE 2180     mov     r1,80h
080504C0 4011     and     r1,r2
080504C2 2202     mov     r2,2h
080504C4 4311     orr     r1,r2
080504C6 7019     strb    r1,[r3]
080504C8 BC02     pop     r1
080504CA 4708     bx      r1
080504CC B500     push    lr
080504CE 1C01     mov     r1,r0
080504D0 1C0B     mov     r3,r1
080504D2 332B     add     r3,2Bh
080504D4 781A     ldrb    r2,[r3]
080504D6 217F     mov     r1,7Fh
080504D8 4011     and     r1,r2
080504DA 2903     cmp     r1,3h
080504DC D204     bcs     80504E8h
080504DE 2180     mov     r1,80h
080504E0 4011     and     r1,r2
080504E2 2203     mov     r2,3h
080504E4 4311     orr     r1,r2
080504E6 7019     strb    r1,[r3]
080504E8 BC02     pop     r1
080504EA 4708     bx      r1
080504EC B570     push    r4-r6,lr
080504EE 1C04     mov     r4,r0
080504F0 1C25     mov     r5,r4
080504F2 3532     add     r5,32h
080504F4 7829     ldrb    r1,[r5]
080504F6 2040     mov     r0,40h
080504F8 4008     and     r0,r1
080504FA 2800     cmp     r0,0h
080504FC D003     beq     8050506h
080504FE 1C20     mov     r0,r4
08050500 F7FFFFD4 bl      80504ACh
08050504 E04F     b       80505A6h
08050506 2008     mov     r0,8h
08050508 4008     and     r0,r1
0805050A 0600     lsl     r0,r0,18h
0805050C 0E06     lsr     r6,r0,18h
0805050E 2E00     cmp     r6,0h
08050510 D003     beq     805051Ah
08050512 1C20     mov     r0,r4
08050514 F7FFFFDA bl      80504CCh
08050518 E045     b       80505A6h
0805051A 1C20     mov     r0,r4
0805051C F7FFFF28 bl      8050370h
08050520 2110     mov     r1,10h
08050522 4001     and     r1,r0
08050524 2900     cmp     r1,0h
08050526 D029     beq     805057Ch
08050528 8AA0     ldrh    r0,[r4,14h]
0805052A 2832     cmp     r0,32h
0805052C D902     bls     8050534h
0805052E 3832     sub     r0,32h
08050530 82A0     strh    r0,[r4,14h]
08050532 E01E     b       8050572h
08050534 2300     mov     r3,0h
08050536 82A6     strh    r6,[r4,14h]
08050538 7829     ldrb    r1,[r5]
0805053A 2010     mov     r0,10h
0805053C 4308     orr     r0,r1
0805053E 7028     strb    r0,[r5]
08050540 1C20     mov     r0,r4
08050542 3030     add     r0,30h
08050544 7003     strb    r3,[r0]
08050546 3810     sub     r0,10h
08050548 7003     strb    r3,[r0]
0805054A 1C21     mov     r1,r4
0805054C 3131     add     r1,31h
0805054E 7808     ldrb    r0,[r1]
08050550 2800     cmp     r0,0h
08050552 D006     beq     8050562h
08050554 4A08     ldr     r2,=30013D4h
08050556 7850     ldrb    r0,[r2,1h]
08050558 2801     cmp     r0,1h
0805055A D102     bne     8050562h
0805055C 2002     mov     r0,2h
0805055E 7050     strb    r0,[r2,1h]
08050560 700B     strb    r3,[r1]
08050562 1C20     mov     r0,r4
08050564 3024     add     r0,24h
08050566 2162     mov     r1,62h
08050568 7001     strb    r1,[r0]
0805056A 1C21     mov     r1,r4
0805056C 3126     add     r1,26h
0805056E 2001     mov     r0,1h
08050570 7008     strb    r0,[r1]
08050572 2211     mov     r2,11h
08050574 E003     b       805057Eh
08050576 0000     lsl     r0,r0,0h
08050578 13D4     asr     r4,r2,0Fh
0805057A 0300     lsl     r0,r0,0Ch
0805057C 2203     mov     r2,3h
0805057E 1C21     mov     r1,r4
08050580 312B     add     r1,2Bh
08050582 780B     ldrb    r3,[r1]
08050584 207F     mov     r0,7Fh
08050586 4018     and     r0,r3
08050588 4290     cmp     r0,r2
0805058A D203     bcs     8050594h
0805058C 2080     mov     r0,80h
0805058E 4302     orr     r2,r0
08050590 700A     strb    r2,[r1]
08050592 E002     b       805059Ah
08050594 2080     mov     r0,80h
08050596 4318     orr     r0,r3
08050598 7008     strb    r0,[r1]
0805059A 1C22     mov     r2,r4
0805059C 3232     add     r2,32h
0805059E 7811     ldrb    r1,[r2]
